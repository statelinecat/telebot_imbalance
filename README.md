# DisbalanceBot

DisbalanceBot — это Telegram-бот, который анализирует дисбаланс спроса и предложения на фьючерсных рынках Binance и предоставляет пользователям отчеты в форматах Excel, PDF и PNG. Бот также отправляет уведомления о последних агрегированных данных по рынку.

## Основные функции

- **Анализ дисбаланса**: Бот анализирует стаканы ордеров для фьючерсных пар на Binance и рассчитывает дисбаланс между спросом и предложением.
- **Отчеты**: Пользователи могут запрашивать отчеты по отдельным монетам или по всему рынку в форматах Excel, PDF и PNG.
- **Уведомления**: Бот отправляет уведомления о последних агрегированных данных по рынку всем авторизованным пользователям.
- **Авторизация**: Для доступа к функционалу бота требуется ввод пин-кода.

## Установка и запуск

### Требования

- Python 3.8 или выше
- Установленные зависимости из `requirements.txt`
- API ключи от Binance (не требуются для данного проекта, так как используется публичный API)
- Telegram Bot Token (нужно создать бота через BotFather)

### Установка

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/ваш-username/disbalancebot.git
   cd disbalancebot
   Установите зависимости:

bash
Copy
pip install -r requirements.txt
Создайте файл configs.py в корневой директории проекта и добавьте туда следующие переменные:

python
Copy
BOT_TOKEN = "ваш_telegram_bot_token"
DATABASE_NAME = "disbalance.db"
PIN_CODE_HASH = "ваш_хеш_пинкода"  # Хеш пин-кода, созданный с помощью bcrypt
Для генерации хеша пин-кода можно использовать следующий код:

python
Copy
import bcrypt
pin_code = "ваш_пинкод"
pin_code_hash = bcrypt.hashpw(pin_code.encode(), bcrypt.gensalt()).decode()
print(pin_code_hash)
Запустите скрипт для сбора данных:

bash
Copy
python collecting_data.py
Запустите Telegram-бота:

bash
Copy
python disbalancebot.py
Использование
Запустите бота в Telegram командой /start.

Введите пин-код для авторизации.

После авторизации вы сможете:

Получить агрегированные данные по всему рынку.

Запросить данные по конкретной монете (например, BTCUSDT).

Сформировать отчеты в форматах Excel, PDF или PNG.

Примеры команд
/start — начать работу с ботом.

/delme — удалить себя из системы.

Весь рынок — получить последние агрегированные данные по рынку.

Выбрать монету — запросить данные по конкретной монете.

Структура проекта
disbalancebot.py — основной скрипт Telegram-бота.

collecting_data.py — скрипт для сбора и анализа данных с Binance.

configs.py — файл с настройками (токен бота, имя базы данных, хеш пин-кода).

requirements.txt — список зависимостей.

База данных
Проект использует SQLite для хранения данных. В базе данных создаются следующие таблицы:

market_pressure — данные по каждой фьючерсной паре.

market_summary — агрегированные данные по всему рынку.

users — список авторизованных пользователей.

Лицензия
Этот проект распространяется под лицензией MIT. Подробнее см. в файле LICENSE.

Автор
statelinecat
